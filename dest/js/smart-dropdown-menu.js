!function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=e("./smart-dropdown-menu"),o=r(i);window.SmartDropdownMenu=o["default"]},{"./smart-dropdown-menu":3}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.el=t,this.index=n,this.el.classList.add("item"+this.index),this.el.addEventListener("mouseover",this.openSubmenu.bind(this)),this.el.addEventListener("mouseout",this.closeSubmenu.bind(this))}return i(e,[{key:"openSubmenu",value:function(){this.el.classList.add("show")}},{key:"closeSubmenu",value:function(){this.el.classList.remove("show")}}]),e}();n["default"]=o},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./smart-dropdown-menu-item"),s=r(u),a=function(){function e(t){i(this,e),this.el=t,this.items=[];for(var n=this.el.querySelectorAll(".menu-list > .menu-item"),r=0;r<n.length;r++)this.items.push(new s["default"](n[r],r));this.el.addEventListener("mouseover",this.showMenu.bind(this)),this.el.addEventListener("mouseout",this.hideMenu.bind(this)),this.showMenu(),this.triarea(),this.hideMenu()}return o(e,[{key:"showMenu",value:function(e){this.el.classList.add("show")}},{key:"hideMenu",value:function(e){this.el.classList.remove("show")}},{key:"triarea",value:function(){var e=document.getElementById("smart-dropdown-menu-style");e||(e=document.createElement("style"),e.type="text/css",e.id="smart-dropdown-menu-style",document.querySelector("head").appendChild(e));for(var t=this.el.querySelector(".menu-item"),n=t.offsetWidth,r=t.offsetHeight,i={},o=0;o<this.items.length;o++){this.items[o].openSubmenu();var u=Math.floor(180*Math.atan2(.5*n,r*o+r/2)/Math.PI);i[".item"+o+":before"]={height:r*o+r/2+"px",transform:"skewX(-"+u+"deg)"};var s=this.items[o].el.querySelector(".submenu-list").offsetHeight,a=s-r/2-r*o,l=Math.floor(180*Math.atan2(.5*n,a)/Math.PI);i[".item"+o+":after"]={"margin-top":"-"+r/2+"px",height:a+"px",transform:"skewX("+l+"deg)"},this.items[o].closeSubmenu()}e.innerHTML=this.objectToStyle(i)}},{key:"objectToStyle",value:function(e){var t="";return Object.keys(e).forEach(function(n){t+=n+"{",Object.keys(e[n]).forEach(function(r){t+=r+": "+e[n][r]+";"}),t+="}"}),t}}]),e}();n["default"]=a},{"./smart-dropdown-menu-item":2}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzbWFydC1kcm9wZG93bi1tZW51LmpzIiwic3JjL2pzL2FwcC5qcyIsInNyYy9qcy9zbWFydC1kcm9wZG93bi1tZW51LWl0ZW0uanMiLCJzcmMvanMvc21hcnQtZHJvcGRvd24tbWVudS5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfc21hcnREcm9wZG93bk1lbnUiLCJfc21hcnREcm9wZG93bk1lbnUyIiwid2luZG93IiwiU21hcnREcm9wZG93bk1lbnUiLCIuL3NtYXJ0LWRyb3Bkb3duLW1lbnUiLCIyIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiU21hcnREcm9wZG93bk1lbnVJdGVtIiwiZWwiLCJpbmRleCIsInRoaXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlblN1Ym1lbnUiLCJiaW5kIiwiY2xvc2VTdWJtZW51IiwicmVtb3ZlIiwiMyIsIl9zbWFydERyb3Bkb3duTWVudUl0ZW0iLCJfc21hcnREcm9wZG93bk1lbnVJdGVtMiIsIm5vZGUiLCJpdGVtcyIsIm1lbnVJdGVtIiwicXVlcnlTZWxlY3RvckFsbCIsInB1c2giLCJzaG93TWVudSIsImhpZGVNZW51IiwidHJpYXJlYSIsImV2ZW50IiwiY2F0ZWdvcnlNZW51U3R5bGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJpZCIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmRDaGlsZCIsIm1lbnVMaXN0U3ViIiwibWVudUl0ZW1XaWR0aCIsIm9mZnNldFdpZHRoIiwibWVudUl0ZW1IZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJjYXRlZ29yeU1lbnVTdHlsZU9iaiIsInRvcEVsZXZhdGlvbiIsIk1hdGgiLCJmbG9vciIsImF0YW4yIiwiUEkiLCJoZWlnaHQiLCJ0cmFuc2Zvcm0iLCJzdWJtZW51SGVpZ2h0IiwiYm90dG9tRWxldmF0aW9uIiwibWFyZ2luLXRvcCIsImlubmVySFRNTCIsIm9iamVjdFRvU3R5bGUiLCJzdHlsZVRleHQiLCJrZXlzIiwiZm9yRWFjaCIsInNlbGVjdG9yIiwicHJvcGVydHkiLCIuL3NtYXJ0LWRyb3Bkb3duLW1lbnUtaXRlbSJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsR0FBQUUsR0FBQSxrQkFBQUMsVUFBQUEsT0FBQSxLQUFBRixHQUFBQyxFQUFBLE1BQUFBLEdBQUFGLEdBQUEsRUFBQSxJQUFBSSxFQUFBLE1BQUFBLEdBQUFKLEdBQUEsRUFBQSxJQUFBSyxHQUFBLEdBQUFDLE9BQUEsdUJBQUFOLEVBQUEsSUFBQSxNQUFBSyxHQUFBRSxLQUFBLG1CQUFBRixFQUFBLEdBQUFHLEdBQUFYLEVBQUFHLElBQUFTLFdBQUFiLEdBQUFJLEdBQUEsR0FBQVUsS0FBQUYsRUFBQUMsUUFBQSxTQUFBZCxHQUFBLEdBQUFFLEdBQUFELEVBQUFJLEdBQUEsR0FBQUwsRUFBQSxPQUFBSSxHQUFBRixFQUFBQSxFQUFBRixJQUFB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LEdBQVdJLEtBQUtHLEdBQ3BITCxHQUFBLFFBQTZCM0UsRUFBN0IsWUFDRWlGLE9BQWFSLEVBQWlCekUsRUFBSXlFLEVBQWlCLEVBQW5ELEtBQ0FTLFVBQUEsVUFBdUJOLEVBQXZCLE9BR0YsSUFBSU8sR0FBZ0J6QyxLQUFLWSxNQUFNdEQsR0FBR3dDLEdBQUc0QixjQUFjLGlCQUFpQk0sYUFFaEVPLEVBQVVFLEVBQWdCVixFQUFpQixFQUFLQSxFQUFpQnpFLEVBQ2pFb0YsRUFBa0JQLEtBQUtDLE1BQWdELElBQTFDRCxLQUFLRSxNQUFzQixHQUFoQlIsRUFBcUJVLEdBQWdCSixLQUFLRyxHQUN0RkwsR0FBQSxRQUE2QjNFLEVBQTdCLFdBQ0VxRixhQUFBLElBQWtCWixFQUFpQixFQUFuQyxLQUNBUSxPQUFhQSxFQUFiLEtBQ0FDLFVBQUEsU0FBc0JFLEVBQXRCLFFBR0YxQyxLQUFLWSxNQUFNdEQsR0FBR2dELGVBR2hCYyxFQUFrQndCLFVBQVk1QyxLQUFLNkMsY0FBY1osTUgyRWpEeEMsSUFBSyxnQkFDTFQsTUFBTyxTR3pFS2YsR0FDWixHQUFJNkUsR0FBWSxFQVFoQixPQVBBaEUsUUFBT2lFLEtBQUs5RSxHQUFLK0UsUUFBUSxTQUFDQyxHQUN4QkgsR0FBYUcsRUFBVyxJQUN4Qm5FLE9BQU9pRSxLQUFLOUUsRUFBSWdGLElBQVdELFFBQVEsU0FBQ0UsR0FDbENKLEdBQWdCSSxFQUFoQixLQUE2QmpGLEVBQUlnRixHQUFVQyxHQUEzQyxNQUVGSixHQUFhLE1BRVJBLE1INkVGdkUsSUFHVFosR0FBQUEsV0c3SnFCWSxJSCtKbEI0RSw2QkFBNkIsU0FBUyIsImZpbGUiOiJzbWFydC1kcm9wZG93bi1tZW51LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfc21hcnREcm9wZG93bk1lbnUgPSByZXF1aXJlKCcuL3NtYXJ0LWRyb3Bkb3duLW1lbnUnKTtcblxudmFyIF9zbWFydERyb3Bkb3duTWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zbWFydERyb3Bkb3duTWVudSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbndpbmRvdy5TbWFydERyb3Bkb3duTWVudSA9IF9zbWFydERyb3Bkb3duTWVudTIuZGVmYXVsdDtcblxufSx7XCIuL3NtYXJ0LWRyb3Bkb3duLW1lbnVcIjozfV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTbWFydERyb3Bkb3duTWVudUl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNtYXJ0RHJvcGRvd25NZW51SXRlbShlbCwgaW5kZXgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU21hcnREcm9wZG93bk1lbnVJdGVtKTtcblxuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdpdGVtJyArIHRoaXMuaW5kZXgpO1xuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLm9wZW5TdWJtZW51LmJpbmQodGhpcykpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmNsb3NlU3VibWVudS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTbWFydERyb3Bkb3duTWVudUl0ZW0sIFt7XG4gICAga2V5OiAnb3BlblN1Ym1lbnUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuU3VibWVudSgpIHtcbiAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2Nsb3NlU3VibWVudScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlU3VibWVudSgpIHtcbiAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTbWFydERyb3Bkb3duTWVudUl0ZW07XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNtYXJ0RHJvcGRvd25NZW51SXRlbTtcblxufSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfc21hcnREcm9wZG93bk1lbnVJdGVtID0gcmVxdWlyZSgnLi9zbWFydC1kcm9wZG93bi1tZW51LWl0ZW0nKTtcblxudmFyIF9zbWFydERyb3Bkb3duTWVudUl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc21hcnREcm9wZG93bk1lbnVJdGVtKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFNtYXJ0RHJvcGRvd25NZW51ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTbWFydERyb3Bkb3duTWVudShub2RlKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNtYXJ0RHJvcGRvd25NZW51KTtcblxuICAgIHRoaXMuZWwgPSBub2RlO1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcblxuICAgIHZhciBtZW51SXRlbSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtbGlzdCA+IC5tZW51LWl0ZW0nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IF9zbWFydERyb3Bkb3duTWVudUl0ZW0yLmRlZmF1bHQobWVudUl0ZW1baV0sIGkpKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuc2hvd01lbnUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuaGlkZU1lbnUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zaG93TWVudSgpO1xuICAgIHRoaXMudHJpYXJlYSgpO1xuICAgIHRoaXMuaGlkZU1lbnUoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTbWFydERyb3Bkb3duTWVudSwgW3tcbiAgICBrZXk6ICdzaG93TWVudScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dNZW51KGV2ZW50KSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoaWRlTWVudScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGVNZW51KGV2ZW50KSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd0cmlhcmVhJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpYXJlYSgpIHtcbiAgICAgIC8vIOaTrOS8vOimgee0oOOBrmNzc+WkieabtOeUqHN0eWxl44K/44KwXG4gICAgICB2YXIgY2F0ZWdvcnlNZW51U3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc21hcnQtZHJvcGRvd24tbWVudS1zdHlsZScpO1xuICAgICAgaWYgKCFjYXRlZ29yeU1lbnVTdHlsZSkge1xuICAgICAgICBjYXRlZ29yeU1lbnVTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIGNhdGVnb3J5TWVudVN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgICAgICBjYXRlZ29yeU1lbnVTdHlsZS5pZCA9ICdzbWFydC1kcm9wZG93bi1tZW51LXN0eWxlJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpLmFwcGVuZENoaWxkKGNhdGVnb3J5TWVudVN0eWxlKTtcbiAgICAgIH1cblxuICAgICAgLy8g44K144OW44Oh44OL44Ol44O86YG45oqe44Gu44Gf44KB44Gr44Kr44O844K944Or44KS5pac44KB56e75YuV44GX44Gf6Zqb44GrXG4gICAgICAvLyDopqrjg6Hjg4vjg6Xjg7zjga7pgbjmip7jgYzlpInjgo/jgaPjgabjgZfjgb7jgo/jgarjgYTjgojjgYbjgavjgIFob3ZlcuWIpOWumumgmOWfn+OCkuaTrOS8vOimgee0oOOBp+aLoeWkp+OBmeOCi1xuICAgICAgdmFyIG1lbnVMaXN0U3ViID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtJyk7XG4gICAgICB2YXIgbWVudUl0ZW1XaWR0aCA9IG1lbnVMaXN0U3ViLm9mZnNldFdpZHRoO1xuICAgICAgdmFyIG1lbnVJdGVtSGVpZ2h0ID0gbWVudUxpc3RTdWIub2Zmc2V0SGVpZ2h0O1xuICAgICAgdmFyIGNhdGVnb3J5TWVudVN0eWxlT2JqID0ge307XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLml0ZW1zW2ldLm9wZW5TdWJtZW51KCk7XG5cbiAgICAgICAgLy8g5pac44KB5LiK5pa55ZCR44GuaG92ZXLliKTlrprmi6HlpKfnlKjjga5iZWZvcmXjgpLnlJ/miJBcbiAgICAgICAgdmFyIHRvcEVsZXZhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5hdGFuMihtZW51SXRlbVdpZHRoICogMC41LCBtZW51SXRlbUhlaWdodCAqIGkgKyBtZW51SXRlbUhlaWdodCAvIDIpICogMTgwIC8gTWF0aC5QSSk7XG4gICAgICAgIGNhdGVnb3J5TWVudVN0eWxlT2JqWycuaXRlbScgKyBpICsgJzpiZWZvcmUnXSA9IHtcbiAgICAgICAgICAnaGVpZ2h0JzogbWVudUl0ZW1IZWlnaHQgKiBpICsgbWVudUl0ZW1IZWlnaHQgLyAyICsgJ3B4JyxcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3NrZXdYKC0nICsgdG9wRWxldmF0aW9uICsgJ2RlZyknXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHN1Ym1lbnVIZWlnaHQgPSB0aGlzLml0ZW1zW2ldLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zdWJtZW51LWxpc3QnKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIC8vIOaWnOOCgeS4i+aWueWQkeOBrmhvdmVy5Yik5a6a5ouh5aSn55So44GuYWZ0ZXLjgpLnlJ/miJBcbiAgICAgICAgdmFyIGhlaWdodCA9IHN1Ym1lbnVIZWlnaHQgLSBtZW51SXRlbUhlaWdodCAvIDIgLSBtZW51SXRlbUhlaWdodCAqIGk7XG4gICAgICAgIHZhciBib3R0b21FbGV2YXRpb24gPSBNYXRoLmZsb29yKE1hdGguYXRhbjIobWVudUl0ZW1XaWR0aCAqIDAuNSwgaGVpZ2h0KSAqIDE4MCAvIE1hdGguUEkpO1xuICAgICAgICBjYXRlZ29yeU1lbnVTdHlsZU9ialsnLml0ZW0nICsgaSArICc6YWZ0ZXInXSA9IHtcbiAgICAgICAgICAnbWFyZ2luLXRvcCc6ICctJyArIG1lbnVJdGVtSGVpZ2h0IC8gMiArICdweCcsXG4gICAgICAgICAgJ2hlaWdodCc6IGhlaWdodCArICdweCcsXG4gICAgICAgICAgJ3RyYW5zZm9ybSc6ICdza2V3WCgnICsgYm90dG9tRWxldmF0aW9uICsgJ2RlZyknXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pdGVtc1tpXS5jbG9zZVN1Ym1lbnUoKTtcbiAgICAgIH1cblxuICAgICAgY2F0ZWdvcnlNZW51U3R5bGUuaW5uZXJIVE1MID0gdGhpcy5vYmplY3RUb1N0eWxlKGNhdGVnb3J5TWVudVN0eWxlT2JqKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvYmplY3RUb1N0eWxlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb2JqZWN0VG9TdHlsZShvYmopIHtcbiAgICAgIHZhciBzdHlsZVRleHQgPSAnJztcbiAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgc3R5bGVUZXh0ICs9IHNlbGVjdG9yICsgJ3snO1xuICAgICAgICBPYmplY3Qua2V5cyhvYmpbc2VsZWN0b3JdKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIHN0eWxlVGV4dCArPSBwcm9wZXJ0eSArICc6ICcgKyBvYmpbc2VsZWN0b3JdW3Byb3BlcnR5XSArICc7JztcbiAgICAgICAgfSk7XG4gICAgICAgIHN0eWxlVGV4dCArPSAnfSc7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdHlsZVRleHQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNtYXJ0RHJvcGRvd25NZW51O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTbWFydERyb3Bkb3duTWVudTtcblxufSx7XCIuL3NtYXJ0LWRyb3Bkb3duLW1lbnUtaXRlbVwiOjJ9XX0se30sWzFdKVxuXG4iLCJpbXBvcnQgU21hcnREcm9wZG93bk1lbnUgZnJvbSAnLi9zbWFydC1kcm9wZG93bi1tZW51Jztcblxud2luZG93LlNtYXJ0RHJvcGRvd25NZW51ID0gU21hcnREcm9wZG93bk1lbnU7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbWFydERyb3Bkb3duTWVudUl0ZW0ge1xuICBjb25zdHJ1Y3RvcihlbCwgaW5kZXgpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZChgaXRlbSR7dGhpcy5pbmRleH1gKVxuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLm9wZW5TdWJtZW51LmJpbmQodGhpcykpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmNsb3NlU3VibWVudS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIG9wZW5TdWJtZW51KCkge1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICB9XG4gIGNsb3NlU3VibWVudSgpIHtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgfVxufVxuIiwiaW1wb3J0IFNtYXJ0RHJvcGRvd25NZW51SXRlbSBmcm9tICcuL3NtYXJ0LWRyb3Bkb3duLW1lbnUtaXRlbSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNtYXJ0RHJvcGRvd25NZW51IHtcbiAgY29uc3RydWN0b3Iobm9kZSkge1xuICAgIHRoaXMuZWwgPSBub2RlO1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcblxuICAgIGxldCBtZW51SXRlbSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtbGlzdCA+IC5tZW51LWl0ZW0nKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lbnVJdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IFNtYXJ0RHJvcGRvd25NZW51SXRlbShtZW51SXRlbVtpXSwgaSkpO1xuICAgIH1cblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5zaG93TWVudS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5oaWRlTWVudS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNob3dNZW51KCk7XG4gICAgdGhpcy50cmlhcmVhKCk7XG4gICAgdGhpcy5oaWRlTWVudSgpO1xuICB9XG5cbiAgc2hvd01lbnUoZXZlbnQpIHtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgfVxuXG4gIGhpZGVNZW51KGV2ZW50KSB7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gIH1cblxuICB0cmlhcmVhKCkge1xuICAgIC8vIOaTrOS8vOimgee0oOOBrmNzc+WkieabtOeUqHN0eWxl44K/44KwXG4gICAgbGV0IGNhdGVnb3J5TWVudVN0eWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NtYXJ0LWRyb3Bkb3duLW1lbnUtc3R5bGUnKTtcbiAgICBpZiAoIWNhdGVnb3J5TWVudVN0eWxlKSB7XG4gICAgICBjYXRlZ29yeU1lbnVTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBjYXRlZ29yeU1lbnVTdHlsZS50eXBlID0gJ3RleHQvY3NzJztcbiAgICAgIGNhdGVnb3J5TWVudVN0eWxlLmlkID0gJ3NtYXJ0LWRyb3Bkb3duLW1lbnUtc3R5bGUnO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpLmFwcGVuZENoaWxkKGNhdGVnb3J5TWVudVN0eWxlKTtcbiAgICB9XG5cbiAgICAvLyDjgrXjg5bjg6Hjg4vjg6Xjg7zpgbjmip7jga7jgZ/jgoHjgavjgqvjg7zjgr3jg6vjgpLmlpzjgoHnp7vli5XjgZfjgZ/pmpvjgatcbiAgICAvLyDopqrjg6Hjg4vjg6Xjg7zjga7pgbjmip7jgYzlpInjgo/jgaPjgabjgZfjgb7jgo/jgarjgYTjgojjgYbjgavjgIFob3ZlcuWIpOWumumgmOWfn+OCkuaTrOS8vOimgee0oOOBp+aLoeWkp+OBmeOCi1xuICAgIGxldCBtZW51TGlzdFN1YiA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbScpO1xuICAgIGxldCBtZW51SXRlbVdpZHRoID0gbWVudUxpc3RTdWIub2Zmc2V0V2lkdGg7XG4gICAgbGV0IG1lbnVJdGVtSGVpZ2h0ID0gbWVudUxpc3RTdWIub2Zmc2V0SGVpZ2h0O1xuICAgIGxldCBjYXRlZ29yeU1lbnVTdHlsZU9iaiA9IHt9O1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuaXRlbXNbaV0ub3BlblN1Ym1lbnUoKTtcblxuICAgICAgLy8g5pac44KB5LiK5pa55ZCR44GuaG92ZXLliKTlrprmi6HlpKfnlKjjga5iZWZvcmXjgpLnlJ/miJBcbiAgICAgIGxldCB0b3BFbGV2YXRpb24gPSBNYXRoLmZsb29yKE1hdGguYXRhbjIobWVudUl0ZW1XaWR0aCAqIDAuNSwgbWVudUl0ZW1IZWlnaHQgKiBpICsgbWVudUl0ZW1IZWlnaHQgLyAyKSAqIDE4MCAvIE1hdGguUEkpO1xuICAgICAgY2F0ZWdvcnlNZW51U3R5bGVPYmpbYC5pdGVtJHtpfTpiZWZvcmVgXSA9IHtcbiAgICAgICAgJ2hlaWdodCc6IGAke21lbnVJdGVtSGVpZ2h0ICogaSArIG1lbnVJdGVtSGVpZ2h0IC8gMn1weGAsXG4gICAgICAgICd0cmFuc2Zvcm0nOiBgc2tld1goLSR7dG9wRWxldmF0aW9ufWRlZylgLFxuICAgICAgfTtcblxuICAgICAgbGV0IHN1Ym1lbnVIZWlnaHQgPSB0aGlzLml0ZW1zW2ldLmVsLnF1ZXJ5U2VsZWN0b3IoJy5zdWJtZW51LWxpc3QnKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAvLyDmlpzjgoHkuIvmlrnlkJHjga5ob3ZlcuWIpOWumuaLoeWkp+eUqOOBrmFmdGVy44KS55Sf5oiQXG4gICAgICBsZXQgaGVpZ2h0ID0gKHN1Ym1lbnVIZWlnaHQgLSBtZW51SXRlbUhlaWdodCAvIDIpIC0gbWVudUl0ZW1IZWlnaHQgKiBpO1xuICAgICAgbGV0IGJvdHRvbUVsZXZhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5hdGFuMihtZW51SXRlbVdpZHRoICogMC41LCBoZWlnaHQpICogMTgwIC8gTWF0aC5QSSk7XG4gICAgICBjYXRlZ29yeU1lbnVTdHlsZU9ialtgLml0ZW0ke2l9OmFmdGVyYF0gPSB7XG4gICAgICAgICdtYXJnaW4tdG9wJzogYC0ke21lbnVJdGVtSGVpZ2h0IC8gMn1weGAsXG4gICAgICAgICdoZWlnaHQnOiBgJHtoZWlnaHR9cHhgLFxuICAgICAgICAndHJhbnNmb3JtJzogYHNrZXdYKCR7Ym90dG9tRWxldmF0aW9ufWRlZylgLFxuICAgICAgfTtcblxuICAgICAgdGhpcy5pdGVtc1tpXS5jbG9zZVN1Ym1lbnUoKTtcbiAgICB9XG5cbiAgICBjYXRlZ29yeU1lbnVTdHlsZS5pbm5lckhUTUwgPSB0aGlzLm9iamVjdFRvU3R5bGUoY2F0ZWdvcnlNZW51U3R5bGVPYmopO1xuICB9XG5cbiAgb2JqZWN0VG9TdHlsZShvYmopIHtcbiAgICBsZXQgc3R5bGVUZXh0ID0gJyc7XG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChzZWxlY3RvcikgPT4ge1xuICAgICAgc3R5bGVUZXh0ICs9IHNlbGVjdG9yICsgJ3snO1xuICAgICAgT2JqZWN0LmtleXMob2JqW3NlbGVjdG9yXSkuZm9yRWFjaCgocHJvcGVydHkpID0+IHtcbiAgICAgICAgc3R5bGVUZXh0ICs9IGAke3Byb3BlcnR5fTogJHtvYmpbc2VsZWN0b3JdW3Byb3BlcnR5XX07YDtcbiAgICAgIH0pO1xuICAgICAgc3R5bGVUZXh0ICs9ICd9JztcbiAgICB9KTtcbiAgICByZXR1cm4gc3R5bGVUZXh0O1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
