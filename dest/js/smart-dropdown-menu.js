!function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!s&&a)return a(o,!0);if(u)return u(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var u="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=e("./smartmenu"),u=i(r);window.SmartMenu=u["default"]},{"./smartmenu":2}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./smartmenuitem"),s=i(o),a=function(){function e(t){r(this,e),this.el=t,this.items=[];for(var n=this.el.querySelectorAll(".menu-list > .menu-item"),i=0;i<n.length;i++)this.items.push(new s["default"](n[i],i));this.el.addEventListener("mouseover",this.showMenu.bind(this)),this.el.addEventListener("mouseout",this.hideMenu.bind(this)),this.showMenu(),this.triarea(),this.hideMenu()}return u(e,[{key:"showMenu",value:function(e){this.el.classList.add("show")}},{key:"hideMenu",value:function(e){this.el.classList.remove("show")}},{key:"triarea",value:function(){var e=document.getElementById("category-menu-style");e||(e=document.createElement("style"),e.type="text/css",e.id="category-menu-style",document.querySelector("head").appendChild(e));for(var t=this.el.querySelector(".menu-item"),n=t.offsetWidth,i=t.offsetHeight,r={},u=0;u<this.items.length;u++){this.items[u].openSubmenu();var o=Math.floor(180*Math.atan2(.5*n,i*u+i/2)/Math.PI);r[".item"+u+":before"]={height:i*u+i/2+"px",transform:"skewX(-"+o+"deg)"};var s=this.items[u].el.querySelector(".submenu-list").offsetHeight,a=s-i/2-i*u,l=Math.floor(180*Math.atan2(.5*n,a)/Math.PI);r[".item"+u+":after"]={"margin-top":"-"+i/2+"px",height:a+"px",transform:"skewX("+l+"deg)"},this.items[u].closeSubmenu()}e.innerHTML=this.objectToStyle(r)}},{key:"objectToStyle",value:function(e){var t="";return Object.keys(e).forEach(function(n){t+=n+"{",Object.keys(e[n]).forEach(function(i){t+=i+": "+e[n][i]+";"}),t+="}"}),t}}]),e}();n["default"]=a},{"./smartmenuitem":3}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t,n){i(this,e),this.el=t,this.index=n,this.el.classList.add("item"+this.index),this.el.addEventListener("mouseover",this.openSubmenu.bind(this)),this.el.addEventListener("mouseout",this.closeSubmenu.bind(this))}return r(e,[{key:"openSubmenu",value:function(){this.el.classList.add("show")}},{key:"closeSubmenu",value:function(){this.el.classList.remove("show")}}]),e}();n["default"]=u},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzbWFydC1kcm9wZG93bi1tZW51LmpzIiwic3JjL2pzL2FwcC5qcyIsInNyYy9qcy9zbWFydG1lbnUuanMiLCJzcmMvanMvc21hcnRtZW51aXRlbS5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfc21hcnRtZW51IiwiX3NtYXJ0bWVudTIiLCJ3aW5kb3ciLCJTbWFydE1lbnUiLCIuL3NtYXJ0bWVudSIsIjIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJfc21hcnRtZW51aXRlbSIsIl9zbWFydG1lbnVpdGVtMiIsIm5vZGUiLCJ0aGlzIiwiZWwiLCJpdGVtcyIsIm1lbnVJdGVtIiwicXVlcnlTZWxlY3RvckFsbCIsInB1c2giLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd01lbnUiLCJiaW5kIiwiaGlkZU1lbnUiLCJ0cmlhcmVhIiwiZXZlbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjYXRlZ29yeU1lbnVTdHlsZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImlkIiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwibWVudUxpc3RTdWIiLCJtZW51SXRlbVdpZHRoIiwib2Zmc2V0V2lkdGgiLCJtZW51SXRlbUhlaWdodCIsIm9mZnNldEhlaWdodCIsImNhdGVnb3J5TWVudVN0eWxlT2JqIiwib3BlblN1Ym1lbnUiLCJ0b3BFbGV2YXRpb24iLCJNYXRoIiwiZmxvb3IiLCJhdGFuMiIsIlBJIiwiaGVpZ2h0IiwidHJhbnNmb3JtIiwic3VibWVudUhlaWdodCIsImJvdHRvbUVsZXZhdGlvbiIsIm1hcmdpbi10b3AiLCJjbG9zZVN1Ym1lbnUiLCJpbm5lckhUTUwiLCJvYmplY3RUb1N0eWxlIiwic3R5bGVUZXh0Iiwia2V5cyIsImZvckVhY2giLCJzZWxlY3RvciIsInByb3BlcnR5IiwiLi9zbWFydG1lbnVpdGVtIiwiMyIsIlNtYXJ0TWVudUl0ZW0iLCJpbmRleCJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsR0FBQUUsR0FBQSxrQkFBQUMsVUFBQUEsT0FBQSxLQUFBRixHQUFBQyxFQUFBLE1BQUFBLEdBQUFGLEdBQUEsRUFBQSxJQUFBSSxFQUFBLE1BQUFBLEdBQUFKLEdBQUEsRUFBQSxJQUFBSyxHQUFBLEdBQUFDLE9BQUEsdUJBQUFOLEVBQUEsSUFBQSxNQUFBSyxHQUFBRSxLQUFBLG1CQUFBRixFQUFBLEdBQUFHLEdBQUFYLEVBQUFHLElBQUFTLFdBQUFiLEdBQUFJLEdBQUEsR0FBQVUsS0FBQUYsRUFBQUMsUUFBQSxTQUFBZCxHQUFBLEdBQUFFLEdBQUFELEVBQUFJLEdBQUEsR0FBQUwsRUFBQSxPQUFBSSxHQUFBRixFQUFBQSxFQUFBRixJQUFBYSxFQUFBQSxFQUFBQyxRQUFBZCxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLE1BQUFELEdBQUFHLEdBQUFTLFFBQUEsSUFBQSxHQUFBTCxHQUFBLGtCQUFBRCxV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V0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNVixPQUFPQyxlQUFlSSxFQUFRRSxFQUFXSSxJQUFLSixJQUFpQixNQUFPLFVBQVVULEVBQWFjLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZUixFQUFpQk4sRUFBWWdCLFVBQVdGLEdBQWlCQyxHQUFhVCxFQUFpQk4sRUFBYWUsR0FBcUJmLE1HaEkzZ0JzRSxFSG9JRCxXR25JbEIsUUFBQUEsR0FBWWpELEVBQUlrRCxHQUFPekUsRUFBQXNCLEtBQUFrRCxHQUNyQmxELEtBQUtDLEdBQUtBLEVBQ1ZELEtBQUttRCxNQUFRQSxFQUNibkQsS0FBS0MsR0FBR1csVUFBVUMsSUFBbEIsT0FBNkJiLEtBQUttRCxPQUVsQ25ELEtBQUtDLEdBQUdLLGlCQUFpQixZQUFhTixLQUFLNkIsWUFBWXJCLEtBQUtSLE9BQzVEQSxLQUFLQyxHQUFHSyxpQkFBaUIsV0FBWU4sS0FBS3dDLGFBQWFoQyxLQUFLUixPSHFKOUQsTUFaQWYsR0FBYWlFLElBQ1h6RCxJQUFLLGNBQ0xULE1BQU8sV0d2SVBnQixLQUFLQyxHQUFHVyxVQUFVQyxJQUFJLFdIMkl0QnBCLElBQUssZUFDTFQsTUFBTyxXR3pJUGdCLEtBQUtDLEdBQUdXLFVBQVVFLE9BQU8sWUg4SXBCb0MsSUFHVHZGLEdBQUFBLFdHL0pxQnVGLFlIaUtWIiwiZmlsZSI6InNtYXJ0LWRyb3Bkb3duLW1lbnUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9zbWFydG1lbnUgPSByZXF1aXJlKCcuL3NtYXJ0bWVudScpO1xuXG52YXIgX3NtYXJ0bWVudTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zbWFydG1lbnUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG53aW5kb3cuU21hcnRNZW51ID0gX3NtYXJ0bWVudTIuZGVmYXVsdDtcblxufSx7XCIuL3NtYXJ0bWVudVwiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9zbWFydG1lbnVpdGVtID0gcmVxdWlyZSgnLi9zbWFydG1lbnVpdGVtJyk7XG5cbnZhciBfc21hcnRtZW51aXRlbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zbWFydG1lbnVpdGVtKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFNtYXJ0TWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU21hcnRNZW51KG5vZGUpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU21hcnRNZW51KTtcblxuICAgIHRoaXMuZWwgPSBub2RlO1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcblxuICAgIHZhciBtZW51SXRlbSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtbGlzdCA+IC5tZW51LWl0ZW0nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IF9zbWFydG1lbnVpdGVtMi5kZWZhdWx0KG1lbnVJdGVtW2ldLCBpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLnNob3dNZW51LmJpbmQodGhpcykpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmhpZGVNZW51LmJpbmQodGhpcykpO1xuICAgIHRoaXMuc2hvd01lbnUoKTtcbiAgICB0aGlzLnRyaWFyZWEoKTtcbiAgICB0aGlzLmhpZGVNZW51KCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU21hcnRNZW51LCBbe1xuICAgIGtleTogJ3Nob3dNZW51JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd01lbnUoZXZlbnQpIHtcbiAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2hpZGVNZW51JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZU1lbnUoZXZlbnQpIHtcbiAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3RyaWFyZWEnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlhcmVhKCkge1xuICAgICAgLy8g5pOs5Ly86KaB57Sg44GuY3Nz5aSJ5pu055Soc3R5bGXjgr/jgrBcbiAgICAgIHZhciBjYXRlZ29yeU1lbnVTdHlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeS1tZW51LXN0eWxlJyk7XG4gICAgICBpZiAoIWNhdGVnb3J5TWVudVN0eWxlKSB7XG4gICAgICAgIGNhdGVnb3J5TWVudVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgY2F0ZWdvcnlNZW51U3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICAgIGNhdGVnb3J5TWVudVN0eWxlLmlkID0gJ2NhdGVnb3J5LW1lbnUtc3R5bGUnO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkJykuYXBwZW5kQ2hpbGQoY2F0ZWdvcnlNZW51U3R5bGUpO1xuICAgICAgfVxuXG4gICAgICAvLyDjgrXjg5bjg6Hjg4vjg6Xjg7zpgbjmip7jga7jgZ/jgoHjgavjgqvjg7zjgr3jg6vjgpLmlpzjgoHnp7vli5XjgZfjgZ/pmpvjgatcbiAgICAgIC8vIOimquODoeODi+ODpeODvOOBrumBuOaKnuOBjOWkieOCj+OBo+OBpuOBl+OBvuOCj+OBquOBhOOCiOOBhuOBq+OAgWhvdmVy5Yik5a6a6aCY5Z+f44KS5pOs5Ly86KaB57Sg44Gn5ouh5aSn44GZ44KLXG4gICAgICB2YXIgbWVudUxpc3RTdWIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0nKTtcbiAgICAgIHZhciBtZW51SXRlbVdpZHRoID0gbWVudUxpc3RTdWIub2Zmc2V0V2lkdGg7XG4gICAgICB2YXIgbWVudUl0ZW1IZWlnaHQgPSBtZW51TGlzdFN1Yi5vZmZzZXRIZWlnaHQ7XG4gICAgICB2YXIgY2F0ZWdvcnlNZW51U3R5bGVPYmogPSB7fTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuaXRlbXNbaV0ub3BlblN1Ym1lbnUoKTtcblxuICAgICAgICAvLyDmlpzjgoHkuIrmlrnlkJHjga5ob3ZlcuWIpOWumuaLoeWkp+eUqOOBrmJlZm9yZeOCkueUn+aIkFxuICAgICAgICB2YXIgdG9wRWxldmF0aW9uID0gTWF0aC5mbG9vcihNYXRoLmF0YW4yKG1lbnVJdGVtV2lkdGggKiAwLjUsIG1lbnVJdGVtSGVpZ2h0ICogaSArIG1lbnVJdGVtSGVpZ2h0IC8gMikgKiAxODAgLyBNYXRoLlBJKTtcbiAgICAgICAgY2F0ZWdvcnlNZW51U3R5bGVPYmpbJy5pdGVtJyArIGkgKyAnOmJlZm9yZSddID0ge1xuICAgICAgICAgICdoZWlnaHQnOiBtZW51SXRlbUhlaWdodCAqIGkgKyBtZW51SXRlbUhlaWdodCAvIDIgKyAncHgnLFxuICAgICAgICAgICd0cmFuc2Zvcm0nOiAnc2tld1goLScgKyB0b3BFbGV2YXRpb24gKyAnZGVnKSdcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3VibWVudUhlaWdodCA9IHRoaXMuaXRlbXNbaV0uZWwucXVlcnlTZWxlY3RvcignLnN1Ym1lbnUtbGlzdCcpLm9mZnNldEhlaWdodDtcbiAgICAgICAgLy8g5pac44KB5LiL5pa55ZCR44GuaG92ZXLliKTlrprmi6HlpKfnlKjjga5hZnRlcuOCkueUn+aIkFxuICAgICAgICB2YXIgaGVpZ2h0ID0gc3VibWVudUhlaWdodCAtIG1lbnVJdGVtSGVpZ2h0IC8gMiAtIG1lbnVJdGVtSGVpZ2h0ICogaTtcbiAgICAgICAgdmFyIGJvdHRvbUVsZXZhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5hdGFuMihtZW51SXRlbVdpZHRoICogMC41LCBoZWlnaHQpICogMTgwIC8gTWF0aC5QSSk7XG4gICAgICAgIGNhdGVnb3J5TWVudVN0eWxlT2JqWycuaXRlbScgKyBpICsgJzphZnRlciddID0ge1xuICAgICAgICAgICdtYXJnaW4tdG9wJzogJy0nICsgbWVudUl0ZW1IZWlnaHQgLyAyICsgJ3B4JyxcbiAgICAgICAgICAnaGVpZ2h0JzogaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3NrZXdYKCcgKyBib3R0b21FbGV2YXRpb24gKyAnZGVnKSdcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLml0ZW1zW2ldLmNsb3NlU3VibWVudSgpO1xuICAgICAgfVxuXG4gICAgICBjYXRlZ29yeU1lbnVTdHlsZS5pbm5lckhUTUwgPSB0aGlzLm9iamVjdFRvU3R5bGUoY2F0ZWdvcnlNZW51U3R5bGVPYmopO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29iamVjdFRvU3R5bGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvYmplY3RUb1N0eWxlKG9iaikge1xuICAgICAgdmFyIHN0eWxlVGV4dCA9ICcnO1xuICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICBzdHlsZVRleHQgKz0gc2VsZWN0b3IgKyAneyc7XG4gICAgICAgIE9iamVjdC5rZXlzKG9ialtzZWxlY3Rvcl0pLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgc3R5bGVUZXh0ICs9IHByb3BlcnR5ICsgJzogJyArIG9ialtzZWxlY3Rvcl1bcHJvcGVydHldICsgJzsnO1xuICAgICAgICB9KTtcbiAgICAgICAgc3R5bGVUZXh0ICs9ICd9JztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN0eWxlVGV4dDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU21hcnRNZW51O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTbWFydE1lbnU7XG5cbn0se1wiLi9zbWFydG1lbnVpdGVtXCI6M31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU21hcnRNZW51SXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU21hcnRNZW51SXRlbShlbCwgaW5kZXgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU21hcnRNZW51SXRlbSk7XG5cbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnaXRlbScgKyB0aGlzLmluZGV4KTtcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5vcGVuU3VibWVudS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5jbG9zZVN1Ym1lbnUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU21hcnRNZW51SXRlbSwgW3tcbiAgICBrZXk6ICdvcGVuU3VibWVudScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5TdWJtZW51KCkge1xuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xvc2VTdWJtZW51JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VTdWJtZW51KCkge1xuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNtYXJ0TWVudUl0ZW07XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNtYXJ0TWVudUl0ZW07XG5cbn0se31dfSx7fSxbMV0pXG5cbiIsImltcG9ydCBTbWFydE1lbnUgZnJvbSAnLi9zbWFydG1lbnUnO1xuXG53aW5kb3cuU21hcnRNZW51ID0gU21hcnRNZW51O1xuIiwiaW1wb3J0IFNtYXJ0TWVudUl0ZW0gZnJvbSAnLi9zbWFydG1lbnVpdGVtJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU21hcnRNZW51IHtcbiAgY29uc3RydWN0b3Iobm9kZSkge1xuICAgIHRoaXMuZWwgPSBub2RlO1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcblxuICAgIGxldCBtZW51SXRlbSA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtbGlzdCA+IC5tZW51LWl0ZW0nKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lbnVJdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IFNtYXJ0TWVudUl0ZW0obWVudUl0ZW1baV0sIGkpKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuc2hvd01lbnUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuaGlkZU1lbnUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zaG93TWVudSgpO1xuICAgIHRoaXMudHJpYXJlYSgpO1xuICAgIHRoaXMuaGlkZU1lbnUoKTtcbiAgfVxuXG4gIHNob3dNZW51KGV2ZW50KSB7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gIH1cblxuICBoaWRlTWVudShldmVudCkge1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICB9XG5cbiAgdHJpYXJlYSgpIHtcbiAgICAvLyDmk6zkvLzopoHntKDjga5jc3PlpInmm7TnlKhzdHlsZeOCv+OCsFxuICAgIGxldCBjYXRlZ29yeU1lbnVTdHlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeS1tZW51LXN0eWxlJyk7XG4gICAgaWYgKCFjYXRlZ29yeU1lbnVTdHlsZSkge1xuICAgICAgY2F0ZWdvcnlNZW51U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgY2F0ZWdvcnlNZW51U3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICBjYXRlZ29yeU1lbnVTdHlsZS5pZCA9ICdjYXRlZ29yeS1tZW51LXN0eWxlJztcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWQnKS5hcHBlbmRDaGlsZChjYXRlZ29yeU1lbnVTdHlsZSk7XG4gICAgfVxuXG4gICAgLy8g44K144OW44Oh44OL44Ol44O86YG45oqe44Gu44Gf44KB44Gr44Kr44O844K944Or44KS5pac44KB56e75YuV44GX44Gf6Zqb44GrXG4gICAgLy8g6Kaq44Oh44OL44Ol44O844Gu6YG45oqe44GM5aSJ44KP44Gj44Gm44GX44G+44KP44Gq44GE44KI44GG44Gr44CBaG92ZXLliKTlrprpoJjln5/jgpLmk6zkvLzopoHntKDjgafmi6HlpKfjgZnjgotcbiAgICBsZXQgbWVudUxpc3RTdWIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0nKTtcbiAgICBsZXQgbWVudUl0ZW1XaWR0aCA9IG1lbnVMaXN0U3ViLm9mZnNldFdpZHRoO1xuICAgIGxldCBtZW51SXRlbUhlaWdodCA9IG1lbnVMaXN0U3ViLm9mZnNldEhlaWdodDtcbiAgICBsZXQgY2F0ZWdvcnlNZW51U3R5bGVPYmogPSB7fTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLml0ZW1zW2ldLm9wZW5TdWJtZW51KCk7XG5cbiAgICAgIC8vIOaWnOOCgeS4iuaWueWQkeOBrmhvdmVy5Yik5a6a5ouh5aSn55So44GuYmVmb3Jl44KS55Sf5oiQXG4gICAgICBsZXQgdG9wRWxldmF0aW9uID0gTWF0aC5mbG9vcihNYXRoLmF0YW4yKG1lbnVJdGVtV2lkdGggKiAwLjUsIG1lbnVJdGVtSGVpZ2h0ICogaSArIG1lbnVJdGVtSGVpZ2h0IC8gMikgKiAxODAgLyBNYXRoLlBJKTtcbiAgICAgIGNhdGVnb3J5TWVudVN0eWxlT2JqW2AuaXRlbSR7aX06YmVmb3JlYF0gPSB7XG4gICAgICAgICdoZWlnaHQnOiBgJHttZW51SXRlbUhlaWdodCAqIGkgKyBtZW51SXRlbUhlaWdodCAvIDJ9cHhgLFxuICAgICAgICAndHJhbnNmb3JtJzogYHNrZXdYKC0ke3RvcEVsZXZhdGlvbn1kZWcpYCxcbiAgICAgIH07XG5cbiAgICAgIGxldCBzdWJtZW51SGVpZ2h0ID0gdGhpcy5pdGVtc1tpXS5lbC5xdWVyeVNlbGVjdG9yKCcuc3VibWVudS1saXN0Jykub2Zmc2V0SGVpZ2h0O1xuICAgICAgLy8g5pac44KB5LiL5pa55ZCR44GuaG92ZXLliKTlrprmi6HlpKfnlKjjga5hZnRlcuOCkueUn+aIkFxuICAgICAgbGV0IGhlaWdodCA9IChzdWJtZW51SGVpZ2h0IC0gbWVudUl0ZW1IZWlnaHQgLyAyKSAtIG1lbnVJdGVtSGVpZ2h0ICogaTtcbiAgICAgIGxldCBib3R0b21FbGV2YXRpb24gPSBNYXRoLmZsb29yKE1hdGguYXRhbjIobWVudUl0ZW1XaWR0aCAqIDAuNSwgaGVpZ2h0KSAqIDE4MCAvIE1hdGguUEkpO1xuICAgICAgY2F0ZWdvcnlNZW51U3R5bGVPYmpbYC5pdGVtJHtpfTphZnRlcmBdID0ge1xuICAgICAgICAnbWFyZ2luLXRvcCc6IGAtJHttZW51SXRlbUhlaWdodCAvIDJ9cHhgLFxuICAgICAgICAnaGVpZ2h0JzogYCR7aGVpZ2h0fXB4YCxcbiAgICAgICAgJ3RyYW5zZm9ybSc6IGBza2V3WCgke2JvdHRvbUVsZXZhdGlvbn1kZWcpYCxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuaXRlbXNbaV0uY2xvc2VTdWJtZW51KCk7XG4gICAgfVxuXG4gICAgY2F0ZWdvcnlNZW51U3R5bGUuaW5uZXJIVE1MID0gdGhpcy5vYmplY3RUb1N0eWxlKGNhdGVnb3J5TWVudVN0eWxlT2JqKTtcbiAgfVxuXG4gIG9iamVjdFRvU3R5bGUob2JqKSB7XG4gICAgbGV0IHN0eWxlVGV4dCA9ICcnO1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHtcbiAgICAgIHN0eWxlVGV4dCArPSBzZWxlY3RvciArICd7JztcbiAgICAgIE9iamVjdC5rZXlzKG9ialtzZWxlY3Rvcl0pLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG4gICAgICAgIHN0eWxlVGV4dCArPSBgJHtwcm9wZXJ0eX06ICR7b2JqW3NlbGVjdG9yXVtwcm9wZXJ0eV19O2A7XG4gICAgICB9KTtcbiAgICAgIHN0eWxlVGV4dCArPSAnfSc7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0eWxlVGV4dDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU21hcnRNZW51SXRlbSB7XG4gIGNvbnN0cnVjdG9yKGVsLCBpbmRleCkge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKGBpdGVtJHt0aGlzLmluZGV4fWApXG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMub3BlblN1Ym1lbnUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuY2xvc2VTdWJtZW51LmJpbmQodGhpcykpO1xuICB9XG5cbiAgb3BlblN1Ym1lbnUoKSB7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gIH1cbiAgY2xvc2VTdWJtZW51KCkge1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
