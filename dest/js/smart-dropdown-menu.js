!function e(t,n,r){function i(u,s){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=e("./smart-dropdown-menu"),o=r(i);window.SmartDropdownMenu=o["default"]},{"./smart-dropdown-menu":3}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.el=t,this.index=n,this.el.classList.add("item"+this.index),this.el.addEventListener("mouseover",this.openSubmenu.bind(this)),this.el.addEventListener("mouseout",this.closeSubmenu.bind(this))}return i(e,[{key:"openSubmenu",value:function(){this.el.classList.add("show")}},{key:"closeSubmenu",value:function(){this.el.classList.remove("show")}}]),e}();n["default"]=o},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./smart-dropdown-menu-item"),s=r(u),a=function(){function e(t){i(this,e),this.el=t,this.items=[];for(var n=this.el.querySelectorAll(".menu-list > .menu-item"),r=0;r<n.length;r++)this.items.push(new s["default"](n[r],r));this.el.addEventListener("mouseover",this.showMenu.bind(this)),this.el.addEventListener("mouseout",this.hideMenu.bind(this)),this.showMenu(),this.appendTriareaStyle(),this.hideMenu()}return o(e,[{key:"showMenu",value:function(e){this.el.classList.add("show")}},{key:"hideMenu",value:function(e){this.el.classList.remove("show")}},{key:"appendTriareaStyle",value:function(){var e=this.calculateTriarea(),t=document.getElementById("smart-dropdown-menu-style");t||(t=document.createElement("style"),t.type="text/css",t.id="smart-dropdown-menu-style",document.querySelector("head").appendChild(t)),t.innerHTML=this.objectToStyle(e)}},{key:"calculateTriarea",value:function(){for(var e=this.el.querySelector(".menu-item"),t=e.offsetWidth,n=e.offsetHeight,r={},i=0;i<this.items.length;i++){this.items[i].openSubmenu();var o=Math.floor(180*Math.atan2(.5*t,n*i+n/2)/Math.PI);r[".item"+i+":before"]={height:n*i+n/2+"px",transform:"skewX(-"+o+"deg)"};var u=this.items[i].el.querySelector(".submenu-list").offsetHeight,s=u-n/2-n*i,a=Math.floor(180*Math.atan2(.5*t,s)/Math.PI);r[".item"+i+":after"]={"margin-top":"-"+n/2+"px",height:s+"px",transform:"skewX("+a+"deg)"},this.items[i].closeSubmenu()}return r}},{key:"objectToStyle",value:function(e){var t="";return Object.keys(e).forEach(function(n){t+=n+"{",Object.keys(e[n]).forEach(function(r){t+=r+": "+e[n][r]+";"}),t+="}"}),t}}]),e}();n["default"]=a},{"./smart-dropdown-menu-item":2}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzbWFydC1kcm9wZG93bi1tZW51LmpzIiwic3JjL2pzL2FwcC5qcyIsInNyYy9qcy9zbWFydC1kcm9wZG93bi1tZW51LWl0ZW0uanMiLCJzcmMvanMvc21hcnQtZHJvcGRvd24tbWVudS5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfc21hcnREcm9wZG93bk1lbnUiLCJfc21hcnREcm9wZG93bk1lbnUyIiwid2luZG93IiwiU21hcnREcm9wZG93bk1lbnUiLCIuL3NtYXJ0LWRyb3Bkb3duLW1lbnUiLCIyIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiU21hcnREcm9wZG93bk1lbnVJdGVtIiwiZWwiLCJpbmRleCIsInRoaXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwib3BlblN1Ym1lbnUiLCJiaW5kIiwiY2xvc2VTdWJtZW51IiwicmVtb3ZlIiwiMyIsIl9zbWFydERyb3Bkb3duTWVudUl0ZW0iLCJfc21hcnREcm9wZG93bk1lbnVJdGVtMiIsIm5vZGUiLCJpdGVtcyIsIm1lbnVJdGVtIiwicXVlcnlTZWxlY3RvckFsbCIsInB1c2giLCJzaG93TWVudSIsImhpZGVNZW51IiwiYXBwZW5kVHJpYXJlYVN0eWxlIiwiZXZlbnQiLCJzdHlsZU9iaiIsImNhbGN1bGF0ZVRyaWFyZWEiLCJjYXRlZ29yeU1lbnVTdHlsZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImlkIiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwiaW5uZXJIVE1MIiwib2JqZWN0VG9TdHlsZSIsIm1lbnVMaXN0U3ViIiwibWVudUl0ZW1XaWR0aCIsIm9mZnNldFdpZHRoIiwibWVudUl0ZW1IZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJjYXRlZ29yeU1lbnVTdHlsZU9iaiIsInRvcEVsZXZhdGlvbiIsIk1hdGgiLCJmbG9vciIsImF0YW4yIiwiUEkiLCJoZWlnaHQiLCJ0cmFuc2Zvcm0iLCJzdWJtZW51SGVpZ2h0IiwiYm90dG9tRWxldmF0aW9uIiwibWFyZ2luLXRvcCIsInN0eWxlVGV4dCIsImtleXMiLCJmb3JFYWNoIiwic2VsZWN0b3IiLCJwcm9wZXJ0eSIsIi4vc21hcnQtZHJvcGRvd24tbWVudS1pdGVtIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FBQUcsR0FBQVgsRUFBQUcsSUFBQVMsV0FBQWIsR0FBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsR0FBQUUsR0FBQUQsRUFBQUksR0FB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TS9DLE9BQVFQLElBQUssQ0FDekMwQyxLQUFLWSxNQUFNdEQsR0FBRzhDLGFBR2QsSUFBSWtDLEdBQWVDLEtBQUtDLE1BQWlGLElBQTNFRCxLQUFLRSxNQUFzQixHQUFoQlIsRUFBcUJFLEVBQWlCN0UsRUFBSTZFLEVBQWlCLEdBQVdJLEtBQUtHLEdBQ3BITCxHQUFBLFFBQTZCL0UsRUFBN0IsWUFDRXFGLE9BQWFSLEVBQWlCN0UsRUFBSTZFLEVBQWlCLEVBQW5ELEtBQ0FTLFVBQUEsVUFBdUJOLEVBQXZCLE9BR0YsSUFBSU8sR0FBZ0I3QyxLQUFLWSxNQUFNdEQsR0FBR3dDLEdBQUc4QixjQUFjLGlCQUFpQlEsYUFFaEVPLEVBQVVFLEVBQWdCVixFQUFpQixFQUFLQSxFQUFpQjdFLEVBQ2pFd0YsRUFBa0JQLEtBQUtDLE1BQWdELElBQTFDRCxLQUFLRSxNQUFzQixHQUFoQlIsRUFBcUJVLEdBQWdCSixLQUFLRyxHQUN0RkwsR0FBQSxRQUE2Qi9FLEVBQTdCLFdBQ0V5RixhQUFBLElBQWtCWixFQUFpQixFQUFuQyxLQUNBUSxPQUFhQSxFQUFiLEtBQ0FDLFVBQUEsU0FBc0JFLEVBQXRCLFFBR0Y5QyxLQUFLWSxNQUFNdEQsR0FBR2dELGVBR2hCLE1BQU8rQixNSDRFUDVDLElBQUssZ0JBQ0xULE1BQU8sU0cxRUtmLEdBQ1osR0FBSStFLEdBQVksRUFRaEIsT0FQQWxFLFFBQU9tRSxLQUFLaEYsR0FBS2lGLFFBQVEsU0FBQ0MsR0FDeEJILEdBQWFHLEVBQVcsSUFDeEJyRSxPQUFPbUUsS0FBS2hGLEVBQUlrRixJQUFXRCxRQUFRLFNBQUNFLEdBQ2xDSixHQUFnQkksRUFBaEIsS0FBNkJuRixFQUFJa0YsR0FBVUMsR0FBM0MsTUFFRkosR0FBYSxNQUVSQSxNSDhFRnpFLElBR1RaLEdBQUFBLFdHbEtxQlksSUhvS2xCOEUsNkJBQTZCLFNBQVMiLCJmaWxlIjoic21hcnQtZHJvcGRvd24tbWVudS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3NtYXJ0RHJvcGRvd25NZW51ID0gcmVxdWlyZSgnLi9zbWFydC1kcm9wZG93bi1tZW51Jyk7XG5cbnZhciBfc21hcnREcm9wZG93bk1lbnUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc21hcnREcm9wZG93bk1lbnUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG53aW5kb3cuU21hcnREcm9wZG93bk1lbnUgPSBfc21hcnREcm9wZG93bk1lbnUyLmRlZmF1bHQ7XG5cbn0se1wiLi9zbWFydC1kcm9wZG93bi1tZW51XCI6M31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU21hcnREcm9wZG93bk1lbnVJdGVtID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTbWFydERyb3Bkb3duTWVudUl0ZW0oZWwsIGluZGV4KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNtYXJ0RHJvcGRvd25NZW51SXRlbSk7XG5cbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnaXRlbScgKyB0aGlzLmluZGV4KTtcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5vcGVuU3VibWVudS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5jbG9zZVN1Ym1lbnUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU21hcnREcm9wZG93bk1lbnVJdGVtLCBbe1xuICAgIGtleTogJ29wZW5TdWJtZW51JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlblN1Ym1lbnUoKSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbG9zZVN1Ym1lbnUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZVN1Ym1lbnUoKSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU21hcnREcm9wZG93bk1lbnVJdGVtO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTbWFydERyb3Bkb3duTWVudUl0ZW07XG5cbn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3NtYXJ0RHJvcGRvd25NZW51SXRlbSA9IHJlcXVpcmUoJy4vc21hcnQtZHJvcGRvd24tbWVudS1pdGVtJyk7XG5cbnZhciBfc21hcnREcm9wZG93bk1lbnVJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NtYXJ0RHJvcGRvd25NZW51SXRlbSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTbWFydERyb3Bkb3duTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU21hcnREcm9wZG93bk1lbnUobm9kZSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTbWFydERyb3Bkb3duTWVudSk7XG5cbiAgICB0aGlzLmVsID0gbm9kZTtcbiAgICB0aGlzLml0ZW1zID0gW107XG5cbiAgICB2YXIgbWVudUl0ZW0gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWxpc3QgPiAubWVudS1pdGVtJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZW51SXRlbS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5pdGVtcy5wdXNoKG5ldyBfc21hcnREcm9wZG93bk1lbnVJdGVtMi5kZWZhdWx0KG1lbnVJdGVtW2ldLCBpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLnNob3dNZW51LmJpbmQodGhpcykpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmhpZGVNZW51LmJpbmQodGhpcykpO1xuICAgIHRoaXMuc2hvd01lbnUoKTtcbiAgICB0aGlzLmFwcGVuZFRyaWFyZWFTdHlsZSgpO1xuICAgIHRoaXMuaGlkZU1lbnUoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTbWFydERyb3Bkb3duTWVudSwgW3tcbiAgICBrZXk6ICdzaG93TWVudScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dNZW51KGV2ZW50KSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdoaWRlTWVudScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGVNZW51KGV2ZW50KSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdhcHBlbmRUcmlhcmVhU3R5bGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBlbmRUcmlhcmVhU3R5bGUoKSB7XG4gICAgICB2YXIgc3R5bGVPYmogPSB0aGlzLmNhbGN1bGF0ZVRyaWFyZWEoKTtcbiAgICAgIC8vIOaTrOS8vOimgee0oOOBrmNzc+WkieabtOeUqHN0eWxl44K/44KwXG4gICAgICB2YXIgY2F0ZWdvcnlNZW51U3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc21hcnQtZHJvcGRvd24tbWVudS1zdHlsZScpO1xuICAgICAgaWYgKCFjYXRlZ29yeU1lbnVTdHlsZSkge1xuICAgICAgICBjYXRlZ29yeU1lbnVTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIGNhdGVnb3J5TWVudVN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgICAgICBjYXRlZ29yeU1lbnVTdHlsZS5pZCA9ICdzbWFydC1kcm9wZG93bi1tZW51LXN0eWxlJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpLmFwcGVuZENoaWxkKGNhdGVnb3J5TWVudVN0eWxlKTtcbiAgICAgIH1cbiAgICAgIGNhdGVnb3J5TWVudVN0eWxlLmlubmVySFRNTCA9IHRoaXMub2JqZWN0VG9TdHlsZShzdHlsZU9iaik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2FsY3VsYXRlVHJpYXJlYScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGN1bGF0ZVRyaWFyZWEoKSB7XG4gICAgICAvLyDjgrXjg5bjg6Hjg4vjg6Xjg7zpgbjmip7jga7jgZ/jgoHjgavjgqvjg7zjgr3jg6vjgpLmlpzjgoHnp7vli5XjgZfjgZ/pmpvjgatcbiAgICAgIC8vIOimquODoeODi+ODpeODvOOBrumBuOaKnuOBjOWkieOCj+OBo+OBpuOBl+OBvuOCj+OBquOBhOOCiOOBhuOBq+OAgWhvdmVy5Yik5a6a6aCY5Z+f44KS5pOs5Ly86KaB57Sg44Gn5ouh5aSn44GZ44KLXG4gICAgICB2YXIgbWVudUxpc3RTdWIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0nKTtcbiAgICAgIHZhciBtZW51SXRlbVdpZHRoID0gbWVudUxpc3RTdWIub2Zmc2V0V2lkdGg7XG4gICAgICB2YXIgbWVudUl0ZW1IZWlnaHQgPSBtZW51TGlzdFN1Yi5vZmZzZXRIZWlnaHQ7XG4gICAgICB2YXIgY2F0ZWdvcnlNZW51U3R5bGVPYmogPSB7fTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuaXRlbXNbaV0ub3BlblN1Ym1lbnUoKTtcblxuICAgICAgICAvLyDmlpzjgoHkuIrmlrnlkJHjga5ob3ZlcuWIpOWumuaLoeWkp+eUqOOBrmJlZm9yZeOCkueUn+aIkFxuICAgICAgICB2YXIgdG9wRWxldmF0aW9uID0gTWF0aC5mbG9vcihNYXRoLmF0YW4yKG1lbnVJdGVtV2lkdGggKiAwLjUsIG1lbnVJdGVtSGVpZ2h0ICogaSArIG1lbnVJdGVtSGVpZ2h0IC8gMikgKiAxODAgLyBNYXRoLlBJKTtcbiAgICAgICAgY2F0ZWdvcnlNZW51U3R5bGVPYmpbJy5pdGVtJyArIGkgKyAnOmJlZm9yZSddID0ge1xuICAgICAgICAgICdoZWlnaHQnOiBtZW51SXRlbUhlaWdodCAqIGkgKyBtZW51SXRlbUhlaWdodCAvIDIgKyAncHgnLFxuICAgICAgICAgICd0cmFuc2Zvcm0nOiAnc2tld1goLScgKyB0b3BFbGV2YXRpb24gKyAnZGVnKSdcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3VibWVudUhlaWdodCA9IHRoaXMuaXRlbXNbaV0uZWwucXVlcnlTZWxlY3RvcignLnN1Ym1lbnUtbGlzdCcpLm9mZnNldEhlaWdodDtcbiAgICAgICAgLy8g5pac44KB5LiL5pa55ZCR44GuaG92ZXLliKTlrprmi6HlpKfnlKjjga5hZnRlcuOCkueUn+aIkFxuICAgICAgICB2YXIgaGVpZ2h0ID0gc3VibWVudUhlaWdodCAtIG1lbnVJdGVtSGVpZ2h0IC8gMiAtIG1lbnVJdGVtSGVpZ2h0ICogaTtcbiAgICAgICAgdmFyIGJvdHRvbUVsZXZhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5hdGFuMihtZW51SXRlbVdpZHRoICogMC41LCBoZWlnaHQpICogMTgwIC8gTWF0aC5QSSk7XG4gICAgICAgIGNhdGVnb3J5TWVudVN0eWxlT2JqWycuaXRlbScgKyBpICsgJzphZnRlciddID0ge1xuICAgICAgICAgICdtYXJnaW4tdG9wJzogJy0nICsgbWVudUl0ZW1IZWlnaHQgLyAyICsgJ3B4JyxcbiAgICAgICAgICAnaGVpZ2h0JzogaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3NrZXdYKCcgKyBib3R0b21FbGV2YXRpb24gKyAnZGVnKSdcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLml0ZW1zW2ldLmNsb3NlU3VibWVudSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2F0ZWdvcnlNZW51U3R5bGVPYmo7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb2JqZWN0VG9TdHlsZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9iamVjdFRvU3R5bGUob2JqKSB7XG4gICAgICB2YXIgc3R5bGVUZXh0ID0gJyc7XG4gICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgIHN0eWxlVGV4dCArPSBzZWxlY3RvciArICd7JztcbiAgICAgICAgT2JqZWN0LmtleXMob2JqW3NlbGVjdG9yXSkuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICBzdHlsZVRleHQgKz0gcHJvcGVydHkgKyAnOiAnICsgb2JqW3NlbGVjdG9yXVtwcm9wZXJ0eV0gKyAnOyc7XG4gICAgICAgIH0pO1xuICAgICAgICBzdHlsZVRleHQgKz0gJ30nO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3R5bGVUZXh0O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTbWFydERyb3Bkb3duTWVudTtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU21hcnREcm9wZG93bk1lbnU7XG5cbn0se1wiLi9zbWFydC1kcm9wZG93bi1tZW51LWl0ZW1cIjoyfV19LHt9LFsxXSlcblxuIiwiaW1wb3J0IFNtYXJ0RHJvcGRvd25NZW51IGZyb20gJy4vc21hcnQtZHJvcGRvd24tbWVudSc7XG5cbndpbmRvdy5TbWFydERyb3Bkb3duTWVudSA9IFNtYXJ0RHJvcGRvd25NZW51O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU21hcnREcm9wZG93bk1lbnVJdGVtIHtcbiAgY29uc3RydWN0b3IoZWwsIGluZGV4KSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoYGl0ZW0ke3RoaXMuaW5kZXh9YClcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5vcGVuU3VibWVudS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5jbG9zZVN1Ym1lbnUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBvcGVuU3VibWVudSgpIHtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgfVxuICBjbG9zZVN1Ym1lbnUoKSB7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gIH1cbn1cbiIsImltcG9ydCBTbWFydERyb3Bkb3duTWVudUl0ZW0gZnJvbSAnLi9zbWFydC1kcm9wZG93bi1tZW51LWl0ZW0nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbWFydERyb3Bkb3duTWVudSB7XG4gIGNvbnN0cnVjdG9yKG5vZGUpIHtcbiAgICB0aGlzLmVsID0gbm9kZTtcbiAgICB0aGlzLml0ZW1zID0gW107XG5cbiAgICBsZXQgbWVudUl0ZW0gPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWxpc3QgPiAubWVudS1pdGVtJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZW51SXRlbS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5pdGVtcy5wdXNoKG5ldyBTbWFydERyb3Bkb3duTWVudUl0ZW0obWVudUl0ZW1baV0sIGkpKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuc2hvd01lbnUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuaGlkZU1lbnUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zaG93TWVudSgpO1xuICAgIHRoaXMuYXBwZW5kVHJpYXJlYVN0eWxlKCk7XG4gICAgdGhpcy5oaWRlTWVudSgpO1xuICB9XG5cbiAgc2hvd01lbnUoZXZlbnQpIHtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgfVxuXG4gIGhpZGVNZW51KGV2ZW50KSB7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gIH1cblxuICBhcHBlbmRUcmlhcmVhU3R5bGUoKSB7XG4gICAgY29uc3Qgc3R5bGVPYmogPSB0aGlzLmNhbGN1bGF0ZVRyaWFyZWEoKTtcbiAgICAvLyDmk6zkvLzopoHntKDjga5jc3PlpInmm7TnlKhzdHlsZeOCv+OCsFxuICAgIGxldCBjYXRlZ29yeU1lbnVTdHlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbWFydC1kcm9wZG93bi1tZW51LXN0eWxlJyk7XG4gICAgaWYgKCFjYXRlZ29yeU1lbnVTdHlsZSkge1xuICAgICAgY2F0ZWdvcnlNZW51U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgY2F0ZWdvcnlNZW51U3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICBjYXRlZ29yeU1lbnVTdHlsZS5pZCA9ICdzbWFydC1kcm9wZG93bi1tZW51LXN0eWxlJztcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWQnKS5hcHBlbmRDaGlsZChjYXRlZ29yeU1lbnVTdHlsZSk7XG4gICAgfVxuICAgIGNhdGVnb3J5TWVudVN0eWxlLmlubmVySFRNTCA9IHRoaXMub2JqZWN0VG9TdHlsZShzdHlsZU9iaik7XG4gIH1cblxuICBjYWxjdWxhdGVUcmlhcmVhKCkge1xuICAgIC8vIOOCteODluODoeODi+ODpeODvOmBuOaKnuOBruOBn+OCgeOBq+OCq+ODvOOCveODq+OCkuaWnOOCgeenu+WLleOBl+OBn+mam+OBq1xuICAgIC8vIOimquODoeODi+ODpeODvOOBrumBuOaKnuOBjOWkieOCj+OBo+OBpuOBl+OBvuOCj+OBquOBhOOCiOOBhuOBq+OAgWhvdmVy5Yik5a6a6aCY5Z+f44KS5pOs5Ly86KaB57Sg44Gn5ouh5aSn44GZ44KLXG4gICAgbGV0IG1lbnVMaXN0U3ViID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtJyk7XG4gICAgbGV0IG1lbnVJdGVtV2lkdGggPSBtZW51TGlzdFN1Yi5vZmZzZXRXaWR0aDtcbiAgICBsZXQgbWVudUl0ZW1IZWlnaHQgPSBtZW51TGlzdFN1Yi5vZmZzZXRIZWlnaHQ7XG4gICAgbGV0IGNhdGVnb3J5TWVudVN0eWxlT2JqID0ge307XG5cbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5pdGVtc1tpXS5vcGVuU3VibWVudSgpO1xuXG4gICAgICAvLyDmlpzjgoHkuIrmlrnlkJHjga5ob3ZlcuWIpOWumuaLoeWkp+eUqOOBrmJlZm9yZeOCkueUn+aIkFxuICAgICAgbGV0IHRvcEVsZXZhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5hdGFuMihtZW51SXRlbVdpZHRoICogMC41LCBtZW51SXRlbUhlaWdodCAqIGkgKyBtZW51SXRlbUhlaWdodCAvIDIpICogMTgwIC8gTWF0aC5QSSk7XG4gICAgICBjYXRlZ29yeU1lbnVTdHlsZU9ialtgLml0ZW0ke2l9OmJlZm9yZWBdID0ge1xuICAgICAgICAnaGVpZ2h0JzogYCR7bWVudUl0ZW1IZWlnaHQgKiBpICsgbWVudUl0ZW1IZWlnaHQgLyAyfXB4YCxcbiAgICAgICAgJ3RyYW5zZm9ybSc6IGBza2V3WCgtJHt0b3BFbGV2YXRpb259ZGVnKWAsXG4gICAgICB9O1xuXG4gICAgICBsZXQgc3VibWVudUhlaWdodCA9IHRoaXMuaXRlbXNbaV0uZWwucXVlcnlTZWxlY3RvcignLnN1Ym1lbnUtbGlzdCcpLm9mZnNldEhlaWdodDtcbiAgICAgIC8vIOaWnOOCgeS4i+aWueWQkeOBrmhvdmVy5Yik5a6a5ouh5aSn55So44GuYWZ0ZXLjgpLnlJ/miJBcbiAgICAgIGxldCBoZWlnaHQgPSAoc3VibWVudUhlaWdodCAtIG1lbnVJdGVtSGVpZ2h0IC8gMikgLSBtZW51SXRlbUhlaWdodCAqIGk7XG4gICAgICBsZXQgYm90dG9tRWxldmF0aW9uID0gTWF0aC5mbG9vcihNYXRoLmF0YW4yKG1lbnVJdGVtV2lkdGggKiAwLjUsIGhlaWdodCkgKiAxODAgLyBNYXRoLlBJKTtcbiAgICAgIGNhdGVnb3J5TWVudVN0eWxlT2JqW2AuaXRlbSR7aX06YWZ0ZXJgXSA9IHtcbiAgICAgICAgJ21hcmdpbi10b3AnOiBgLSR7bWVudUl0ZW1IZWlnaHQgLyAyfXB4YCxcbiAgICAgICAgJ2hlaWdodCc6IGAke2hlaWdodH1weGAsXG4gICAgICAgICd0cmFuc2Zvcm0nOiBgc2tld1goJHtib3R0b21FbGV2YXRpb259ZGVnKWAsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLml0ZW1zW2ldLmNsb3NlU3VibWVudSgpO1xuICAgIH1cblxuICAgIHJldHVybiBjYXRlZ29yeU1lbnVTdHlsZU9iajtcbiAgfVxuXG4gIG9iamVjdFRvU3R5bGUob2JqKSB7XG4gICAgbGV0IHN0eWxlVGV4dCA9ICcnO1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHtcbiAgICAgIHN0eWxlVGV4dCArPSBzZWxlY3RvciArICd7JztcbiAgICAgIE9iamVjdC5rZXlzKG9ialtzZWxlY3Rvcl0pLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG4gICAgICAgIHN0eWxlVGV4dCArPSBgJHtwcm9wZXJ0eX06ICR7b2JqW3NlbGVjdG9yXVtwcm9wZXJ0eV19O2A7XG4gICAgICB9KTtcbiAgICAgIHN0eWxlVGV4dCArPSAnfSc7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0eWxlVGV4dDtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
